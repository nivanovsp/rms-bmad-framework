# Enhancement Proposal: MLDA Auto-Initialization

**DOC-ID:** ENHANCEMENT-001
**Status:** Proposed
**Created:** 2026-01-13
**Author:** Mary (Business Analyst)
**Beads:** Ways of Development-16 (Epic)

---

## Problem Statement

When users create a new project folder and initialize the RMS-BMAD methodology, MLDA (Modular Linked Documentation Architecture) is not automatically scaffolded. Users must:

1. Manually copy `.mlda/` folder structure
2. Copy scripts and templates
3. Initialize registry.yaml
4. Remember to use MLDA for new documents

This leads to projects with:
- Inconsistent documentation structure
- Manual markdown links (functional but not validated)
- No automated link integrity checking
- No centralized registry

**Real Example:** The Invoice Module has 7 documents (expecting 32) with manual links but no MLDA infrastructure.

---

## Proposed Solution

### New Skill: `/skills:init-project`

A skill that runs during project initialization to:

1. **Ask about documentation scope**
2. **Scaffold MLDA if threshold met**
3. **Configure domain-specific settings**

### User Flow

```
User: /skills:init-project

Agent: "What type of project is this?"
  1. Documentation-heavy (15+ expected docs) - Recommended for MLDA
  2. Code-focused (few docs) - Manual linking sufficient
  3. Not sure yet

User: [selects 1]

Agent: "Select documentation domains for this project:"
  [ ] API - API specifications
  [ ] AUTH - Authentication/Authorization
  [ ] DATA - Data models
  [ ] INV - Invoicing (custom domain)
  [ ] SEC - Security
  [ ] UI - User Interface
  [ ] Other (specify)

User: [selects domains]

Agent: Creates .mlda/ structure with:
  - scripts/ (copied from methodology)
  - templates/ (copied from methodology)
  - docs/{selected-domains}/
  - registry.yaml (initialized)
  - README.md (customized)

Agent: "MLDA initialized. Use `.mlda/scripts/mlda-create.ps1` to create new topic documents."
```

---

## Implementation Details

### 1. Skill Definition File

**Location:** `.claude/commands/skills/init-project.md`

```yaml
skill:
  name: init-project
  description: Initialize project with optional MLDA scaffolding
  triggers:
    - /init-project
    - /skills:init-project

workflow:
  - step: assess_scope
    ask: "documentation volume"
    threshold: 15

  - step: select_domains
    if: mlda_enabled
    options: [API, AUTH, DATA, SEC, UI, custom]

  - step: scaffold
    if: mlda_enabled
    actions:
      - create_mlda_folder
      - copy_scripts
      - copy_templates
      - init_registry
      - create_domain_folders
```

### 2. MLDA Scaffold Script

**Location:** `.mlda/scripts/mlda-init-project.ps1`

```powershell
param(
    [Parameter(Mandatory=$true)]
    [string]$ProjectPath,

    [Parameter(Mandatory=$true)]
    [string[]]$Domains,

    [Parameter()]
    [string]$MethodologyPath = $PSScriptRoot
)

# Create .mlda structure in target project
$targetMlda = Join-Path $ProjectPath ".mlda"
New-Item -ItemType Directory -Path $targetMlda -Force

# Copy scripts
Copy-Item -Path "$MethodologyPath/scripts/*" -Destination "$targetMlda/scripts/" -Recurse

# Copy templates
Copy-Item -Path "$MethodologyPath/templates/*" -Destination "$targetMlda/templates/" -Recurse

# Create domain folders
foreach ($domain in $Domains) {
    $domainPath = Join-Path "$targetMlda/docs" $domain.ToLower()
    New-Item -ItemType Directory -Path $domainPath -Force
}

# Initialize registry
$registry = @"
# MLDA Document Registry
# Auto-generated by init-project

project: $(Split-Path $ProjectPath -Leaf)
created: $(Get-Date -Format "yyyy-MM-dd")
domains: [$($Domains -join ", ")]

documents: []
"@
Set-Content -Path "$targetMlda/registry.yaml" -Value $registry
```

### 3. Integration Points

| Component | Change Required |
|-----------|-----------------|
| `/skills:init-project` | New skill file |
| `.mlda/scripts/mlda-init-project.ps1` | New script |
| `CLAUDE.md` | Document new skill |
| Mode files | Add `*init-project` command |

---

## Domain Codes

Standard domains for DOC-ID assignment:

| Code | Domain | Example DOC-ID |
|------|--------|----------------|
| API | API specifications | DOC-API-001 |
| AUTH | Authentication | DOC-AUTH-001 |
| DATA | Data models | DOC-DATA-001 |
| INV | Invoicing | DOC-INV-001 |
| SEC | Security | DOC-SEC-001 |
| UI | User Interface | DOC-UI-001 |
| INFRA | Infrastructure | DOC-INFRA-001 |
| INT | Integrations | DOC-INT-001 |
| TEST | Testing | DOC-TEST-001 |

Custom domains can be added per project.

---

## Acceptance Criteria

- [ ] `/skills:init-project` skill exists and is documented
- [ ] Skill asks about documentation volume
- [ ] MLDA scaffolding triggers when threshold >= 15 docs
- [ ] All MLDA scripts are copied to target project
- [ ] Domain folders are created based on selection
- [ ] registry.yaml is initialized
- [ ] Existing modes can invoke the skill
- [ ] Invoice Module can be migrated using this approach

---

## Migration Path for Existing Projects

For projects like Invoice Module with existing documents:

1. Run `/skills:init-project` to scaffold `.mlda/`
2. Use `mlda-create.ps1 -NoBead` for new documents
3. Manually add `.meta.yaml` sidecars to existing docs
4. Run `mlda-registry.ps1` to rebuild registry
5. Run `mlda-validate.ps1` to check links

---

## Risks and Mitigations

| Risk | Mitigation |
|------|------------|
| Users ignore MLDA for small projects | Threshold-based activation (15+ docs) |
| Script copy creates version drift | Consider git submodule or symlinks |
| Domain selection too complex | Provide sensible defaults |
| Existing docs hard to migrate | Provide migration script |

---

## Open Questions

1. Should MLDA scripts be symlinked or copied?
2. What's the right threshold (15 docs proposed)?
3. Should we auto-detect existing docs and suggest migration?

---

## Related Issues

- **Epic:** Ways of Development-16
- **Tasks:**
  - Ways of Development-17: Write this documentation
  - Ways of Development-18: Create init-project skill
  - Ways of Development-19: Update methodology
  - Ways of Development-20: Scaffold Invoice Module
  - Ways of Development-21: Migrate Invoice Module docs

---

## Changelog

| Date | Author | Change |
|------|--------|--------|
| 2026-01-13 | Mary | Initial proposal |
